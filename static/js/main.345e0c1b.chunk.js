(this.webpackJsonpbestsearch=this.webpackJsonpbestsearch||[]).push([[0],{403:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(75),s=n.n(c),o=n(90),i=n(94),d=n(204),u=n(33),j="keyword/input",l="keyword/clear",p="keyword/format",h="trends/search",m="trends/fetch",b="trends/fail",f=n(2),x=function(e){return e.trim().split(" ").join("+")},O=function(e){return e.split("+").map((function(e){return e.replace(/%2B/g,"+")})).join(" ").trim()},v=function(e,t){return e.split(" ").map((function(e,n){return t.split("+").map((function(e){return e.replace(/%2B/g,"+")})).includes(e)?Object(f.jsx)("span",{style:{fontWeight:"400"},children:e},n):e})).reduce((function(e,t){return[e," ",t]}))},g=function(e){var t=e.search_msv[0].sv;return((e.search_msv[e.search_msv.length-1].sv-t)/t*100).toFixed(0)},y=function(e){var t=e.slice(),n=function(e){return t[e].svc=t[e].sv};return n(0),n(t.length-1),t},w=function(e){return 7!==e.length?[e.slice(0,5),0,e.slice(5)].join(""):e},k={isLoading:!1,keyword:"",productTrends:[],message:""},T=Object(i.b)({searchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(u.a)(Object(u.a)({},e),{},{keyword:t.payload.keyword});case l:return Object(u.a)(Object(u.a)({},e),{},{keyword:""});case p:return Object(u.a)(Object(u.a)({},e),{},{keyword:O(t.payload.keyword)});case h:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,productTrends:[],message:""});case m:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,productTrends:t.payload.data});case b:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,productTrends:[],message:t.payload.message});default:return e}}}),S=n(77),_=n(456),B=n(225),N=Object(B.a)({palette:{background:{default:"#f9f4e8"},primary:{main:"#212121",light:"#484848",dark:"#000",contrastText:"#fff"},text:{caption:"rgba(0, 0, 0, 0.5)"}}}),F=n(29),L=n(439),R=n(455),W=n(8),C=n(451),K=n(453),A=n(454),I=n(449),M=n(440),z=n(441),D=n(450),E=n(434),Y=n(48),G=n.n(Y),H=n(103),P=n(155),J=n.n(P),U="MMM YYYY",q={product_trends:[{name:"Best Shoes",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:25e4}]},{name:"Best House Shoes",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:35e4}]},{name:"Best Running Shoes",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:45e4}]},{name:"Best Hiking Shoes",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:55e4}]},{name:"Best Cool Shoes",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:65e4}]},{name:"Shoes+",search_msv:[{date:"2015-9",sv:161700},{date:"2015-10",sv:169950},{date:"2021-6",sv:353280},{date:"2021-7",sv:75e4}]}]};J.a.defaults.baseURL="http://3.141.23.218:5000/interview";var Q={search:function(){var e=Object(H.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){setTimeout((function(){t?e(q):n("Empty keyword!")}),4200)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V=function(e){return function(t){t({type:{input:j,clear:l,format:p}[e.type],payload:{keyword:e.value}})}},X=Object(o.b)((function(e){return{keyword:e.searchReducer.keyword}}),(function(e){return{updateKeyword:function(t){return e(V(t))}}}))((function(e){var t=e.keyword,n=e.updateKeyword,a=Object(F.g)(),c=Object(F.h)().pathname;return Object(r.useEffect)((function(){"/"===c&&n({type:"clear",value:""})}),[c,n]),Object(f.jsxs)(I.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=x(t.get("keyword").replace(/\+/g,"%2B"));("/"!==c||n)&&a.push("/search/".concat(n))},sx:{display:"flex",gap:"0.5em",flexGrow:"1"},children:[Object(f.jsx)(z.a,{name:"keyword",value:t,onChange:function(e){var t=e.target.value;n({type:"input",value:t})},placeholder:"Search for new products in 961K stores",sx:{flexGrow:1,"& .MuiOutlinedInput-input":{padding:"0.5em 1em"}}}),Object(f.jsx)(D.a,{type:"submit",variant:"outlined",sx:{color:"rgba(0, 0, 0, 0.54)",borderColor:"rgba(0, 0, 0, 0.23)"},children:Object(f.jsx)(E.a,{})})]})})),Z=Object(M.a)((function(e){var t;return{root:Object(W.a)({backgroundColor:e.palette.background.default+" !important",borderBottom:"1px solid ".concat(e.palette.divider)},e.breakpoints.up("md"),{"& form":{maxWidth:"75%"}}),toolbar:{gap:"1em"},logoText:(t={color:e.palette.text.primary,fontWeight:300},Object(W.a)(t,e.breakpoints.between("sm","md"),{fontSize:"1.1rem"}),Object(W.a)(t,e.breakpoints.down("sm"),{display:"none"}),t),logoIcon:Object(W.a)({color:e.palette.primary.contrastText,background:e.palette.primary.dark,fontFamily:"serif",padding:"0.25em",lineHeight:1,borderRadius:"3px"},e.breakpoints.up("sm"),{display:"none"})}})),$=function(){var e=Object(F.h)().pathname,t=Z();return Object(f.jsx)(C.a,{elevation:0,className:t.root,children:Object(f.jsxs)(K.a,{className:t.toolbar,children:[Object(f.jsx)(A.a,{component:"h1",variant:"h6",children:Object(f.jsxs)(S.b,{to:"/",style:{color:"inherit",textDecoration:"none"},children:[Object(f.jsxs)(I.a,{className:t.logoText,children:[Object(f.jsx)("strong",{style:{fontWeight:500},children:"Best"}),"Search"]}),Object(f.jsx)(I.a,{className:t.logoIcon,children:"ST"})]})}),e.startsWith("/search")&&Object(f.jsx)(X,{})]})})},ee=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.a,{component:"h2",variant:"h4",align:"center",sx:{fontSize:"2.5rem",fontWeight:300,mt:"8rem",mb:"4rem"},children:"Search Trends"}),Object(f.jsx)(X,{})]})},te=n(446),ne=n(447),re=function(){return[1,2,3,4].map((function(e){return Object(f.jsxs)(te.a,{item:!0,xs:12,sm:6,md:3,children:[Object(f.jsx)(ne.a,{variant:"text",width:"75%"}),Object(f.jsx)(ne.a,{variant:"text",width:"40%"}),Object(f.jsx)(ne.a,{variant:"rectangular",height:180,sx:{mt:"0.5em"}})]},e)}))},ae=n(452),ce=n(435),se=n(448),oe=n(227),ie=function(e){var t=e.product,n=e.index,r="141, 181, 213",a="142, 198, 170",c={fill:"rgb(".concat(n%2===0?r:a,")")},s={fill:n%2===0?"rgba(".concat(r,", ").concat("0.6",")"):"rgba(".concat(a,", ").concat("0.6",")")};return Object(f.jsx)(ce.a,{width:"100%",aspect:1.618,children:Object(f.jsxs)(se.a,{data:y(t.search_msv),margin:{top:0,right:0,bottom:0,left:0},children:[Object(f.jsx)(oe.a,Object(u.a)({type:"monotone",isAnimationActive:!1,dataKey:"sv",stroke:"none"},c)),Object(f.jsx)(oe.a,Object(u.a)(Object(u.a)({type:"linear",isAnimationActive:!1,dataKey:"svc",stroke:"none"},s),{},{connectNulls:!0}))]})})},de=n(159),ue=n.n(de),je=Object(M.a)((function(e){return{root:{position:"relative"},header:{position:"absolute",width:"100%",padding:"1em"},title:{fontWeight:"300 !important"},growth:{color:e.palette.text.caption,fontSize:"0.85rem !important",marginTop:"0.5rem !important"},chart:{marginTop:"5rem"},footer:{color:e.palette.text.caption,textAlign:"center",fontSize:"0.85rem !important",padding:"0.5rem"}}})),le=function(e){var t=e.keyword,n=e.productTrends,r=je();return n&&n.map((function(e,n){return Object(f.jsx)(te.a,{item:!0,xs:12,sm:6,md:3,children:Object(f.jsxs)(ae.a,{variant:"outlined",className:r.root,children:[Object(f.jsxs)(I.a,{className:r.header,children:[Object(f.jsx)(A.a,{component:"h3",variant:"h6",className:r.title,children:v(e.name,t)}),Object(f.jsx)(A.a,{className:r.growth,children:"Growth ".concat(g(e),"%")})]}),Object(f.jsx)(I.a,{className:r.chart,children:Object(f.jsx)(ie,{product:e,index:n})}),Object(f.jsxs)(A.a,{className:r.footer,children:[Object(f.jsx)(ue.a,{date:w(e.search_msv[0].date),format:U})," - ",Object(f.jsx)(ue.a,{date:w(e.search_msv[e.search_msv.length-1].date),format:U})]})]})},n)}))},pe=n(443),he=function(e){var t=e.message;return Object(f.jsx)(pe.a,{severity:t.type,children:t.content})},me=Object(o.b)((function(e){return{isLoading:e.searchReducer.isLoading,productTrends:e.searchReducer.productTrends,message:e.searchReducer.message}}),(function(e){return{updateKeyword:function(t){return e(V(t))},searchTrends:function(t){return e(function(e){return function(t){t(e?{type:h}:{type:b,payload:{message:{type:"info",content:"No keyword was provided."}}})}}(t))},fetchTrends:function(t){return e(function(e){return function(){var t=Object(H.a)(G.a.mark((function t(n){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Q.search(e).then((function(e){n({type:m,payload:{data:e.product_trends}})})).catch((function(e){console.error(e),n({type:b,payload:{message:{type:"error",content:e.toString()}}})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.isLoading,n=e.productTrends,a=e.updateKeyword,c=e.searchTrends,s=e.fetchTrends,o=e.message,i=Object(F.i)().keyword,d=Object(F.g)();return Object(r.useEffect)((function(){c(i);var e=i&&x(i);e&&(e!==i?d.push("/search/".concat(e)):(s(i),a({type:"format",value:i})))}),[i,d,a,c,s]),Object(f.jsx)(f.Fragment,{children:o||!i?Object(f.jsx)(he,{message:o}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.a,{component:"h2",variant:"h6",sx:{fontWeight:300,mb:"1rem"},children:"Related product trends"}),Object(f.jsx)(te.a,{container:!0,spacing:2,children:t?Object(f.jsx)(re,{}):Object(f.jsx)(le,{keyword:i,productTrends:n})})]})})})),be=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L.a,{}),Object(f.jsx)($,{}),Object(f.jsx)(R.a,{component:"main",maxWidth:"md",sx:{mt:"6em",mb:"6em"},children:Object(f.jsxs)(F.d,{children:[Object(f.jsx)(F.b,{exact:!0,path:"/",component:ee}),Object(f.jsx)(F.b,{exact:!0,path:"/search",component:me}),Object(f.jsx)(F.b,{exact:!0,path:"/search/:keyword",component:me}),Object(f.jsx)(F.b,{path:"*",children:Object(f.jsx)(F.a,{to:"/"})})]})})]})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,457)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},xe=[d.a],Oe=Object(i.d)(T,{},Object(i.c)(i.a.apply(void 0,xe)));s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(o.a,{store:Oe,children:Object(f.jsx)(S.a,{basename:"/bestsearch",children:Object(f.jsx)(_.a,{theme:N,children:Object(f.jsx)(be,{})})})})}),document.getElementById("root")),fe()}},[[403,1,2]]]);
//# sourceMappingURL=main.345e0c1b.chunk.js.map